# Walkthrough

## In short
1. Make sure you have installed all dependencies for the target OS.
2. `git clone` this project.
3. Write a `launcher-config.json`.
4. Write a `deployment-config.json`.
5. Determine what bundles your project needs and put them in a folder.
6. Generate `bundleinfo.json` files, e.g. using the `hasher` tool.
7. Create signatures of the `bundleinfo.json` files as well as the `deployment-config.json` using `signer`.
8. Run `make` and `make bundle`.
9. Set up a webserver.
10. Upload required files to webserver.
11. Publish the files under `out/release_files/os/binaryname`[`.exe`/`.app`] to your users.

## Getting ready to build
Once you are able to build the base project for the desired operating system(s), you are ready to customize trivrost for your use. See [building.md](building.md), which covers (1) and (2).

## Configure resources
trivrost needs the following files to generate the required sources automatically, which you need to provide. They need to be placed into the `cmd/launcher/resources` directory before building:
* [launcher-config.json](glossary.md#launcher-config) → used during build and embedded into the binary so trivrost knows where to find the deployment-config.
* [icon.png](glossary.md#icon) → embedded into the binary as the application icon for Linux.
* [icon.ico](glossary.md#icon) → embedded into the binary as the application icon for Windows.
* [icon.icns](glossary.md#icon) → embedded into the application bundle as the application icon for MacOS.
* [public-rsa-keys.pem](security.md) → embedded into the binary to verify signed updates with.

## Hashing and signing bundles
When executing `make tools`, a binary called `hasher` will be created that takes a directory as an argument and creates the `bundleinfo.json` file. A helper-script called `signer` is also available which takes a private key and a list of files to sign using openssl.

For convenience, a [Docker image](../docker/Dockerfile-tools) is provided that builds the hasher and provides an environment e.g. for CI pipelines where hasher and signer are available in the `$PATH`.

## Backend
To use trivrost, you have to operate at least one webserver. This webserver only has to deliver static content. Even though the config files and packages are cryptographically signed, it is hightly recommended to use TLS for securing connections to this webserver.

## Integration
The bundle info files can be generated by `hasher` which is built along with trivrost. For a description on how to implement this in your pipeline, see [integration.md](integration.md).

## Security
The deployment-config has to be signed and must contain the hash values of the bundle info files. For details please read [security.md](security.md).
